# Бот и админка для заказов потолков

## Функционал

### Telegram-бот
- Пошаговое оформление заявки на замер потолка:
  - Имя, телефон, адрес
  - Выбор материала и площади
  - Выбор дополнительных работ
  - Загрузка фото помещения
  - Выбор даты и времени замера (только свободные слоты)
  - Подтверждение заявки
- Валидация всех данных
- Кнопки "назад" и "отмена" на каждом этапе
- Календарь для выбора даты (выходные и занятые дни недоступны)
- Время замера отображается только если оно свободно, занятые слоты — неактивны
- После подтверждения заявки мастер получает уведомление в Telegram (ID настраивается)

### Админка (веб-интерфейс)
- Просмотр всех заявок в виде таблицы
- Изменение статуса заявки: "новая", "в работе", "выполнена"
- Просмотр фото, данных клиента, даты и времени замера
- Управление выходными днями через календарь (массовое выделение, быстрый переход по месяцам)
- Выходные дни сразу исключаются из выбора в боте
- Авторизация для админов

## Быстрый запуск

1. Установите зависимости:
   ```sh
   pip install -r requirements.txt
   ```
2. Укажите настройки в `.env` (токен бота, логин/пароль админа и т.д.)
3. Запустите всё одной командой:
   ```sh
   sh activate_bot.sh
   ```
   - Бот и админка стартуют в фоне
   - Админка доступна по адресу: http://127.0.0.1:5000
   - Логи: `bot.log`, `admin.log`

## Остановка

Для остановки всех процессов:
```sh
pkill -f bot.bot
pkill -f web.app
```

## Примечания
- Все заявки и настройки хранятся в SQLite (`database/bot.db`)
- Фото сохраняются в `database/uploads`
- Выходные дни отмечаются в админке и сразу блокируются для выбора в боте
- Время замера нельзя выбрать, если оно уже занято другой заявкой

---

**Если потребуется добавить новые функции — пиши!** 